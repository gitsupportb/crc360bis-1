<!DOCTYPE html>
<html>
<head>
    <title>CRC360 Icon Generator</title>
</head>
<body>
    <h2>CRC360 PWA Icon Generator</h2>
    <div id="canvases"></div>
    <button onclick="downloadAll()">Download All Icons</button>

    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        const canvases = {};

        function createIcon(size) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            canvas.style.border = '1px solid #ccc';
            canvas.style.margin = '5px';
            
            const ctx = canvas.getContext('2d');
            
            // Create gradient background
            const gradient = ctx.createLinearGradient(0, 0, size, size);
            gradient.addColorStop(0, '#FF6B35');
            gradient.addColorStop(1, '#F7931E');
            
            // Draw rounded rectangle
            const radius = size * 0.22;
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.roundRect(0, 0, size, size, radius);
            ctx.fill();
            
            // Draw shield icon
            const centerX = size / 2;
            const centerY = size / 2;
            const shieldWidth = size * 0.5;
            const shieldHeight = size * 0.6;
            
            ctx.strokeStyle = 'white';
            ctx.lineWidth = size * 0.035;
            ctx.fillStyle = 'none';
            
            // Shield path
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - shieldHeight/2 + size * 0.05);
            ctx.lineTo(centerX - shieldWidth/2, centerY - shieldHeight/2 + size * 0.15);
            ctx.lineTo(centerX - shieldWidth/2, centerY + size * 0.05);
            ctx.quadraticCurveTo(centerX - shieldWidth/2, centerY + shieldHeight/2, centerX, centerY + shieldHeight/2);
            ctx.quadraticCurveTo(centerX + shieldWidth/2, centerY + shieldHeight/2, centerX + shieldWidth/2, centerY + size * 0.05);
            ctx.lineTo(centerX + shieldWidth/2, centerY - shieldHeight/2 + size * 0.15);
            ctx.closePath();
            ctx.stroke();
            
            return canvas;
        }

        function downloadCanvas(canvas, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function downloadAll() {
            sizes.forEach(size => {
                const canvas = canvases[size];
                downloadCanvas(canvas, `icon-${size}x${size}.png`);
            });
        }

        // Create all icons
        const container = document.getElementById('canvases');
        sizes.forEach(size => {
            const canvas = createIcon(size);
            canvases[size] = canvas;
            
            const div = document.createElement('div');
            div.innerHTML = `<h4>Icon ${size}x${size}</h4>`;
            div.appendChild(canvas);
            
            const downloadBtn = document.createElement('button');
            downloadBtn.textContent = `Download ${size}x${size}`;
            downloadBtn.onclick = () => downloadCanvas(canvas, `icon-${size}x${size}.png`);
            div.appendChild(downloadBtn);
            
            container.appendChild(div);
        });

        // Polyfill for roundRect if not available
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {
                if (w < 2 * r) r = w / 2;
                if (h < 2 * r) r = h / 2;
                this.beginPath();
                this.moveTo(x + r, y);
                this.arcTo(x + w, y, x + w, y + h, r);
                this.arcTo(x + w, y + h, x, y + h, r);
                this.arcTo(x, y + h, x, y, r);
                this.arcTo(x, y, x + w, y, r);
                this.closePath();
                return this;
            };
        }
    </script>
</body>
</html>